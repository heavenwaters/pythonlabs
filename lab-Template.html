<!DOCTYPE html>
<html>

<head>
    <title>Lab NO.</title>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <py-config>
        terminal = false
    </py-config>

    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            height: 100%;
        }

        .editors {
            height: 70%;
            font-size: 16px;
        }

        .runbuttons {
            float: right;
            margin-top: 10px;
            margin-right: 10px;
        }

        .resetButton {
            float: right;
            margin-top: 10px;

        }

        #complete {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 200px;
            height: 50px;
            margin: 20px auto;
            background-color: red;
            color: white;
            font-weight: bold;
            font-size: 24px;
        }

        pre.code,
        code {
            background-color: lightgray;
            font-family: "Courier New", monospace;
            font-size: normal;
        }

        .question {
            padding: 20px;
        }
    </style>
</head>

<body>
    <h1 style="text-align: center;"><strong>Lab No: Topic</strong></h1>
    <br><br>
    <hr>
    <div class="question">
        <h2 style="margin-top: 0;"><strong>Instructions</strong></h2>
        Some instructions.
    </div>
    <hr>
    <!-- Question###############################################################################################-->
    <div id="question1" class="question">
        <h3><strong>Question 1</strong></h3>
        <h4><strong>Task</strong></h4>
        This question requires that you write a function <code>add</code> that adds two numbers a and b.
        <h4><strong>Input Format</strong></h4>
        <h4><strong>constraints</strong></h4>
        <h4><strong>Output Format</strong></h4>
        <h4><strong>Sample Input 0</strong></h4>
        <pre class="code">
This is some code
        </pre>
        <h4><strong>Sample Output 0</strong></h4>
        <pre class="code">
This is some code
        </pre>
    </div>
    <div id="editor1" class="editors"></div>
    <button id="resetButton1" class="resetButton">Reset</button>
    <button id="getCodeButton1" class="runbuttons">Save and Run Code</button>
    <br><br>
    <hr>
    <!-- #####################################################################################################-->

    <!-- Question###############################################################################################-->
    <div id="question2" class="question">
        <h3><strong>Question 2</strong></h3>
        <h4><strong>Task</strong></h4>
        This question requires you to output <code>Hello World!</code> to the console.
        <h4><strong>Input Format</strong></h4>
        <h4><strong>constraints</strong></h4>
        <h4><strong>Output Format</strong></h4>
        <h4><strong>Sample Input 0</strong></h4>
        <pre class="code">
This is some code
        </pre>
        <h4><strong>Sample Output 0</strong></h4>
        <pre class="code">
This is some code
        </pre>
    </div>
    <div id="editor2" class="editors"></div>
    <button id="resetButton2" class="resetButton">Reset</button>
    <button id="getCodeButton2" class="runbuttons">Save and Run Code</button>
    <br><br>
    <hr>
    <!-- #####################################################################################################-->

    <!-- Question###############################################################################################-->
    <div id="question3" class="question">
        <h3><strong>Question 3</strong></h3>
        <h4><strong>Task</strong></h4>
        This question requires you to output <code>Hello World!</code> to the console.
        <h4><strong>Input Format</strong></h4>
        <h4><strong>constraints</strong></h4>
        <h4><strong>Output Format</strong></h4>
        <h4><strong>Sample Input 0</strong></h4>
        <pre class="code">
This is some code
        </pre>
        <h4><strong>Sample Output 0</strong></h4>
        <pre class="code">
This is some code
        </pre>
    </div>
    <div id="editor3" class="editors"></div>
    <button id="resetButton3" class="resetButton">Reset</button>
    <button id="getCodeButton3" class="runbuttons">Save and Run Code</button>
    <br><br>
    <hr>
    <!-- #####################################################################################################-->

    <!-- Question###############################################################################################-->
    <div id="question4" class="question">
        <h3><strong>Question 4</strong></h3>
        <h4><strong>Task</strong></h4>
        This question requires you to output <code>Hello World!</code> to the console.
        <h4><strong>Input Format</strong></h4>
        <h4><strong>constraints</strong></h4>
        <h4><strong>Output Format</strong></h4>
        <h4><strong>Sample Input 0</strong></h4>
        <pre class="code">
This is some code
        </pre>
        <h4><strong>Sample Output 0</strong></h4>
        <pre class="code">
This is some code
        </pre>
    </div>
    <div id="editor4" class="editors"></div>
    <button id="resetButton4" class="resetButton">Reset</button>
    <button id="getCodeButton4" class="runbuttons">Save and Run Code</button>
    <br><br>
    <hr>
    <!-- #####################################################################################################-->

    <!-- Question###############################################################################################-->
    <div id="question5" class="question">
        <h3><strong>Question 5</strong></h3>
        <h4><strong>Task</strong></h4>
        This question requires you to output <code>Hello World!</code> to the console.
        <h4><strong>Input Format</strong></h4>
        <h4><strong>constraints</strong></h4>
        <h4><strong>Output Format</strong></h4>
        <h4><strong>Sample Input 0</strong></h4>
        <pre class="code">
This is some code
        </pre>
        <h4><strong>Sample Output 0</strong></h4>
        <pre class="code">
This is some code
        </pre>
    </div>
    <div id="editor5" class="editors"></div>
    <button id="resetButton5" class="resetButton">Reset</button>
    <button id="getCodeButton5" class="runbuttons">Save and Run Code</button>
    <br><br>
    <hr>
    <!-- #####################################################################################################-->



    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
    <!--<script src="lab1.js"></script>-->
    <script type="py-script" id="codeOutput"></script>
    <br>
    <button id="complete">Finish</button>

    <script>
        //Question
        var defaultCode1 = `#you should only add code where required
import traceback


class StdoutCapture:
    def __init__(self):
        self._stdout = ""

    def write(self, text):
        self._stdout += str(text)

    def get_value(self):
        return self._stdout

class StdinCapture:
    def __init__(self, inputs):
        self._inputs = inputs
        self._index = 0

    def readline(self):
        if self._index < len(self._inputs):
            input_value = self._inputs[self._index]
            self._index += 1
            return input_value + "\\n"
        else:
            return ""

# your code goes here...    
def main():

#Donot alter this code
if __name__ == "__main__":
    try:
        capture = StdoutCapture()
        original_print = print
        print = capture.write
        main()
        captured_stdout = capture.get_value()
        print = original_print
        print(captured_stdout)
        print("")

        # Define Tests Here
        results = [] #format [[testcase: inputs,ex]]
        for result in results:
            capture = StdoutCapture()
            original_print = print
            print = capture.write

            ex = result.pop()
            inputs = result
            capture_input = StdinCapture(inputs)
            original_input = input
            input = capture_input.readline

            main()

            captured_stdout = capture.get_value()
            print = original_print
            input = original_input

            if captured_stdout == ex:
                print(".",end="")
            else:
                print("F",end="")
                print(f"\\nYour Output:\\n{captured_stdout}\\nExpected:\\n{ex}")
        print(f"\\nCompleted {len(results)} tests")
    except Exception as e:
        traceback.print_exc()
`
        //Question
        var defaultCode2 = `#you should only add code where required
import traceback


class StdoutCapture:
    def __init__(self):
        self._stdout = ""

    def write(self, text):
        self._stdout += str(text)

    def get_value(self):
        return self._stdout

class StdinCapture:
    def __init__(self, inputs):
        self._inputs = inputs
        self._index = 0

    def readline(self):
        if self._index < len(self._inputs):
            input_value = self._inputs[self._index]
            self._index += 1
            return input_value + "\\n"
        else:
            return ""

# your code goes here...    
def main():

#Donot alter this code
if __name__ == "__main__":
    try:
        capture = StdoutCapture()
        original_print = print
        print = capture.write
        main()
        captured_stdout = capture.get_value()
        print = original_print
        print(captured_stdout)
        print("")

        # Define Tests Here
        results = [] #format [[testcase: inputs,ex]]
        for result in results:
            capture = StdoutCapture()
            original_print = print
            print = capture.write

            ex = result.pop()
            inputs = result
            capture_input = StdinCapture(inputs)
            original_input = input
            input = capture_input.readline

            main()

            captured_stdout = capture.get_value()
            print = original_print
            input = original_input

            if captured_stdout == ex:
                print(".",end="")
            else:
                print("F",end="")
                print(f"\\nYour Output:\\n{captured_stdout}\\nExpected:\\n{ex}")
        print(f"\\nCompleted {len(results)} tests")
    except Exception as e:
        traceback.print_exc()
`
        var defaultCode3 = `#you should only add code where required
import traceback


class StdoutCapture:
    def __init__(self):
        self._stdout = ""

    def write(self, text):
        self._stdout += str(text)

    def get_value(self):
        return self._stdout

class StdinCapture:
    def __init__(self, inputs):
        self._inputs = inputs
        self._index = 0

    def readline(self):
        if self._index < len(self._inputs):
            input_value = self._inputs[self._index]
            self._index += 1
            return input_value + "\\n"
        else:
            return ""

# your code goes here...    
def main():

#Donot alter this code
if __name__ == "__main__":
    try:
        capture = StdoutCapture()
        original_print = print
        print = capture.write
        main()
        captured_stdout = capture.get_value()
        print = original_print
        print(captured_stdout)
        print("")

        # Define Tests Here
        results = [] #format [[testcase: inputs,ex]]
        for result in results:
            capture = StdoutCapture()
            original_print = print
            print = capture.write

            ex = result.pop()
            inputs = result
            capture_input = StdinCapture(inputs)
            original_input = input
            input = capture_input.readline

            main()

            captured_stdout = capture.get_value()
            print = original_print
            input = original_input

            if captured_stdout == ex:
                print(".",end="")
            else:
                print("F",end="")
                print(f"\\nYour Output:\\n{captured_stdout}\\nExpected:\\n{ex}")
        print(f"\\nCompleted {len(results)} tests")
    except Exception as e:
        traceback.print_exc()
`

        var defaultCode4 = `#you should only add code where required
import traceback


class StdoutCapture:
    def __init__(self):
        self._stdout = ""

    def write(self, text):
        self._stdout += str(text)

    def get_value(self):
        return self._stdout

class StdinCapture:
    def __init__(self, inputs):
        self._inputs = inputs
        self._index = 0

    def readline(self):
        if self._index < len(self._inputs):
            input_value = self._inputs[self._index]
            self._index += 1
            return input_value + "\\n"
        else:
            return ""

# your code goes here...    
def main():

#Donot alter this code
if __name__ == "__main__":
    try:
        capture = StdoutCapture()
        original_print = print
        print = capture.write
        main()
        captured_stdout = capture.get_value()
        print = original_print
        print(captured_stdout)
        print("")

        # Define Tests Here
        results = [] #format [[testcase: inputs,ex]]
        for result in results:
            capture = StdoutCapture()
            original_print = print
            print = capture.write

            ex = result.pop()
            inputs = result
            capture_input = StdinCapture(inputs)
            original_input = input
            input = capture_input.readline

            main()

            captured_stdout = capture.get_value()
            print = original_print
            input = original_input

            if captured_stdout == ex:
                print(".",end="")
            else:
                print("F",end="")
                print(f"\\nYour Output:\\n{captured_stdout}\\nExpected:\\n{ex}")
        print(f"\\nCompleted {len(results)} tests")
    except Exception as e:
        traceback.print_exc()
`

        var defaultCode5 = `#you should only add code where required
import traceback


class StdoutCapture:
    def __init__(self):
        self._stdout = ""

    def write(self, text):
        self._stdout += str(text)

    def get_value(self):
        return self._stdout

class StdinCapture:
    def __init__(self, inputs):
        self._inputs = inputs
        self._index = 0

    def readline(self):
        if self._index < len(self._inputs):
            input_value = self._inputs[self._index]
            self._index += 1
            return input_value + "\\n"
        else:
            return ""

# your code goes here...    
def main():

#Donot alter this code
if __name__ == "__main__":
    try:
        capture = StdoutCapture()
        original_print = print
        print = capture.write
        main()
        captured_stdout = capture.get_value()
        print = original_print
        print(captured_stdout)
        print("")

        # Define Tests Here
        results = [] #format [[testcase: inputs,ex]]
        for result in results:
            capture = StdoutCapture()
            original_print = print
            print = capture.write

            ex = result.pop()
            inputs = result
            capture_input = StdinCapture(inputs)
            original_input = input
            input = capture_input.readline

            main()

            captured_stdout = capture.get_value()
            print = original_print
            input = original_input

            if captured_stdout == ex:
                print(".",end="")
            else:
                print("F",end="")
                print(f"\\nYour Output:\\n{captured_stdout}\\nExpected:\\n{ex}")
        print(f"\\nCompleted {len(results)} tests")
    except Exception as e:
        traceback.print_exc()
`




        window.addEventListener('DOMContentLoaded', (event) => {

            // Function to get code from local storage or return default code
            function getCodeFromLocalStorageOrDefault(editorId, defaultCode) {
                var localStorageKey = "code_" + editorId;
                var savedCode = localStorage.getItem(localStorageKey);
                return savedCode ? savedCode : defaultCode;
            }

            // Function to get code from an editor
            function getCodeFromEditor(editorId) {
                var editor = ace.edit(editorId);
                return editor.getValue();
            }

            // Function to save code to local storage
            function saveCodeToLocalStorage(editorId) {
                var code = getCodeFromEditor(editorId);
                var localStorageKey = "code_" + editorId;
                localStorage.setItem(localStorageKey, code);
                console.log("Code saved to local storage for editor: " + editorId);
            }

            //complete button
            var getfinishbutton = document.getElementById("complete");
            getfinishbutton.addEventListener("click", function () {
                localStorage.clear();
                if (confirm("Are you sure you want to close? Any changes to the editors will now be deleted.")) {
                    window.open('', '_self').close();
                }
            })


            //Question############################################################################################
            // Create the Ace Editor instances
            var editor1 = ace.edit("editor1");
            editor1.setTheme("ace/theme/monokai");
            editor1.session.setMode("ace/mode/python");


            var code = getCodeFromLocalStorageOrDefault("editor1", defaultCode1);
            editor1.setValue(code, -1);

            // Event listener for the first button click
            var getCodeButton1 = document.getElementById('getCodeButton1');
            getCodeButton1.addEventListener('click', function () {
                getCodeButton1.disabled = true;
                var code = getCodeFromEditor("editor1");
                //getCodeButton1.disabled = true;
                //console.log(code);
                var editorId = "editor1"; // The id of the second editor


                // Save the code to local storage for editor 1
                saveCodeToLocalStorage(editorId);

                // Create a new script element for the first editor

                var codeOutputScript1 = document.createElement('script');
                codeOutputScript1.type = 'py-script';
                codeOutputScript1.id = 'codeOutput';
                //codeOutputScript1.output = "output1";
                codeOutputScript1.textContent = code;

                console.clear();
                // Replace the existing script element for the first editor
                var existingScript1 = document.getElementById('codeOutput');
                existingScript1.parentNode.replaceChild(codeOutputScript1, existingScript1);
                existingScript1.remove();
                getCodeButton1.disabled = false;

            });

            // Event listener for the first reset button click
            var resetButton1 = document.getElementById('resetButton1');
            resetButton1.addEventListener('click', function () {
                var localStorageKey = "code_editor1";
                localStorage.removeItem(localStorageKey);
                editor1.getSession().setValue(defaultCode1, -1);
            });
            //###################################################################################################

            //Question############################################################################################
            var editor2 = ace.edit("editor2");
            editor2.setTheme("ace/theme/monokai");
            editor2.session.setMode("ace/mode/python");

            var code = getCodeFromLocalStorageOrDefault("editor2", defaultCode2);
            editor2.setValue(code, -1);

            // Event listener for the second button click
            var getCodeButton2 = document.getElementById('getCodeButton2');
            getCodeButton2.addEventListener('click', function () {
                getCodeButton2.disabled = true;
                var code = getCodeFromEditor("editor2");
                var editorId = "editor2"; // The id of the second editor

                //getCodeButton2.disabled = true;
                //console.log(code);

                // Save the code to local storage for editor 2
                saveCodeToLocalStorage(editorId);

                // Create a new script element for the second editor

                var codeOutputScript2 = document.createElement('script');
                codeOutputScript2.type = 'py-script';
                codeOutputScript2.id = 'codeOutput';
                //codeOutputScript2.output = "output2";
                codeOutputScript2.textContent = code;

                console.clear();
                // Replace the existing script element for the second editor
                var existingScript2 = document.getElementById('codeOutput');
                existingScript2.parentNode.replaceChild(codeOutputScript2, existingScript2);
                existingScript2.remove();
                getCodeButton2.disabled = false;

            });

            // Event listener for the second reset button click
            var resetButton2 = document.getElementById('resetButton2');
            resetButton2.addEventListener('click', function () {
                var localStorageKey = "code_editor2";
                localStorage.removeItem(localStorageKey);
                editor2.getSession().setValue(defaultCode2, -1);
            });
            //###################################################################################################


            //Question############################################################################################
            var editor3 = ace.edit("editor3");
            editor3.setTheme("ace/theme/monokai");
            editor3.session.setMode("ace/mode/python");

            var code = getCodeFromLocalStorageOrDefault("editor3", defaultCode3);
            editor3.setValue(code, -1);

            // Event listener for the second button click
            var getCodeButton3 = document.getElementById('getCodeButton3');
            getCodeButton3.addEventListener('click', function () {
                getCodeButton3.disabled = true;
                var code = getCodeFromEditor("editor3");
                var editorId = "editor3"; // The id of the second editor

                //getCodeButton2.disabled = true;
                //console.log(code);

                // Save the code to local storage for editor 2
                saveCodeToLocalStorage(editorId);

                // Create a new script element for the second editor

                var codeOutputScript3 = document.createElement('script');
                codeOutputScript3.type = 'py-script';
                codeOutputScript3.id = 'codeOutput';
                //codeOutputScript2.output = "output2";
                codeOutputScript3.textContent = code;

                console.clear();
                // Replace the existing script element for the second editor
                var existingScript3 = document.getElementById('codeOutput');
                existingScript3.parentNode.replaceChild(codeOutputScript3, existingScript3);
                existingScript3.remove();
                getCodeButton3.disabled = false;

            });

            // Event listener for the second reset button click
            var resetButton3 = document.getElementById('resetButton3');
            resetButton3.addEventListener('click', function () {
                var localStorageKey = "code_editor3";
                localStorage.removeItem(localStorageKey);
                editor3.getSession().setValue(defaultCode3, -1);
            });
            //###################################################################################################

            //Question############################################################################################
            var editor4 = ace.edit("editor4");
            editor4.setTheme("ace/theme/monokai");
            editor4.session.setMode("ace/mode/python");

            var code = getCodeFromLocalStorageOrDefault("editor4", defaultCode4);
            editor4.setValue(code, -1);

            // Event listener for the second button click
            var getCodeButton4 = document.getElementById('getCodeButton4');
            getCodeButton4.addEventListener('click', function () {
                getCodeButton4.disabled = true;
                var code = getCodeFromEditor("editor4");
                var editorId = "editor4"; // The id of the second editor

                //getCodeButton2.disabled = true;
                //console.log(code);

                // Save the code to local storage for editor 2
                saveCodeToLocalStorage(editorId);

                // Create a new script element for the second editor

                var codeOutputScript4 = document.createElement('script');
                codeOutputScript4.type = 'py-script';
                codeOutputScript4.id = 'codeOutput';
                //codeOutputScript2.output = "output2";
                codeOutputScript4.textContent = code;

                console.clear();
                // Replace the existing script element for the second editor
                var existingScript4 = document.getElementById('codeOutput');
                existingScript4.parentNode.replaceChild(codeOutputScript4, existingScript4);
                existingScript4.remove();
                getCodeButton4.disabled = false;

            });

            // Event listener for the second reset button click
            var resetButton4 = document.getElementById('resetButton4');
            resetButton4.addEventListener('click', function () {
                var localStorageKey = "code_editor4";
                localStorage.removeItem(localStorageKey);
                editor4.getSession().setValue(defaultCode4, -1);
            });
            //###################################################################################################

            //Question############################################################################################
            var editor5 = ace.edit("editor5");
            editor5.setTheme("ace/theme/monokai");
            editor5.session.setMode("ace/mode/python");

            var code = getCodeFromLocalStorageOrDefault("editor5", defaultCode5);
            editor5.setValue(code, -1);

            // Event listener for the second button click
            var getCodeButton5 = document.getElementById('getCodeButton5');
            getCodeButton5.addEventListener('click', function () {
                getCodeButton5.disabled = true;
                var code = getCodeFromEditor("editor5");
                var editorId = "editor5"; // The id of the second editor

                //getCodeButton2.disabled = true;
                //console.log(code);

                // Save the code to local storage for editor 2
                saveCodeToLocalStorage(editorId);

                // Create a new script element for the second editor

                var codeOutputScript5 = document.createElement('script');
                codeOutputScript5.type = 'py-script';
                codeOutputScript5.id = 'codeOutput';
                //codeOutputScript2.output = "output2";
                codeOutputScript5.textContent = code;

                console.clear();
                // Replace the existing script element for the second editor
                var existingScript5 = document.getElementById('codeOutput');
                existingScript5.parentNode.replaceChild(codeOutputScript5, existingScript5);
                existingScript5.remove();
                getCodeButton5.disabled = false;

            });

            // Event listener for the second reset button click
            var resetButton5 = document.getElementById('resetButton5');
            resetButton5.addEventListener('click', function () {
                var localStorageKey = "code_editor5";
                localStorage.removeItem(localStorageKey);
                editor5.getSession().setValue(defaultCode5, -1);
            });
            //###################################################################################################


            //All-Questions########################################################################################      
            // Load code from local storage to the editors
            var savedCode1 = localStorage.getItem("code_editor1");
            var savedCode2 = localStorage.getItem("code_editor2");
            var savedCode3 = localStorage.getItem("code_editor3");
            var savedCode4 = localStorage.getItem("code_editor4");
            var savedCode5 = localStorage.getItem("code_editor5");
            if (savedCode1) {
                editor1.setValue(savedCode1);
            }
            if (savedCode2) {
                editor2.setValue(savedCode2);
            }
            if (savedCode3) {
                editor3.setValue(savedCode3);
            }
            if (savedCode4) {
                editor4.setValue(savedCode4);
            }
            if (savedCode5) {
                editor5.setValue(savedCode5);
            }
            //###################################################################################################


        });
    </script>
</body>

</html>